<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ChatGPT Carbon Calculator</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>

  <div class="header">
    <h1>Carbon Footprint</h1>
    <button id="refresh">Refresh</button>
  </div>

  <p id="status">Initializing...</p>

  <!-- Main Results Display -->
  <div class="results-container">
    <div class="emission-total">
      <h2 id="co2-linear" style="color:#a3e635;font-weight:bold;"></h2>
      <h2 id="co2-quadratic" style="color:#eab308;font-weight:bold;"></h2>
    </div>
    <div class="emission-breakdown">
      <p id="co2-operational"></p>
      <p id="co2-embodied"></p>
    </div>
    <p id="impact-note" class="impact-note"></p>
    <div id="co2-comparison"></div>
  </div>

  <!-- Configuration Section -->
  <details classs="settings-container">
    <summary>Configuration</summary>
    <form id="settings-form" class="settings-form">
      <div class="form-group">
        <label for="impact-select">Complexity Model:</label>
        <select id="impact-select" class="styled-select">
          <option value="linear" selected>Linear (Optimistic)</option>
          <option value="quadratic">Quadratic (Conservative)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="param-count">Model Parameters (Billions)</label>
        <input type="number" id="param-count" value="175" step="1">
      </div>
      <div class="form-group">
        <label for="region">Region:</label>
        <select id="region" class="styled-select">
          <option value="custom">Custom</option>
          <!-- Regions will be populated from data.js -->
        </select>
      </div>
      <div class="form-group">
        <label for="carbon-intensity">Carbon Intensity (gCO2e/kWh):</label>
        <input type="number" id="carbon-intensity" value="450" step="1">
      </div>
       <div class="form-group">
        <label for="pue">PUE:</label>
        <input type="number" id="pue" value="1.1" step="0.01">
      </div>
      <div class="form-group">
        <label for="hardware-select">Hardware:</label>
        <select id="hardware-select" class="styled-select">
          <!-- Options will be populated from hardware-data.js -->
        </select>
      </div>
      <div class="form-group">
        <label for="gpu-count">GPU Count:</label>
        <input type="number" id="gpu-count" value="16" min="1">
      </div>
      <div class="form-group">
        <label for="hardware-efficiency">HW Efficiency:</label>
        <input type="number" id="hardware-efficiency" value="0.35" step="0.01" min="0" max="1">
      </div>
    </form>
  </details>

  <!-- Per-Prompt Breakdown Section -->
  <details class="settings-container">
    <summary>Per-Prompt Breakdown</summary>
    <div id="counts-container">
      <ul id="counts">
        <!-- Token counts will be inserted here -->
      </ul>
    </div>
  </details>

  <script src="data.js"></script>
  <script src="hardware-data.js"></script>
  <script src="sidepanel.js" type="module"></script>
</body>
</html>